(()=>{"use strict";const e=document.getElementById("videoPlayer"),t=document.getElementById("startRecording"),d=document.getElementById("stopRecording");let o,a;t.addEventListener("click",(()=>{t.disabled=!0,d.disabled=!1,a=[],navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}).then((t=>{e.srcObject=t,e.controls=!1,e.muted=!0,e.autoplay=!0,o=new MediaRecorder(t),o.ondataavailable=e=>{e.data&&e.data.size>0&&a.push(e.data)},o.onstop=function(){t.getTracks().forEach((e=>e.stop()));const d=new Blob(a,{type:"video/webm"}),o=URL.createObjectURL(d),c=document.createElement("a");c.href=o,c.download="recording.webm",document.body.appendChild(c),c.click(),document.body.removeChild(c),e.controls=!0,e.muted=!1,e.srcObject=null,e.src=o,e.play()},o.start()})).catch((e=>{console.error("获取屏幕流失败",e)}))})),d.addEventListener("click",(()=>{d.disabled=!0,t.disabled=!1,o.stop()}))})();